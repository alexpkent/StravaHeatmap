<div>
  <nav class="navbar navbar-dark bg-dark pb-0">
    <span class="navbar-brand mb-0 h1 text-warning">
      Alex's Strava Heat Map
      <span *ngIf="loaded"
            class="navbar-text home">
        | <a (click)="goHome()"
           [routerLink]="">Home</a>
        |
        <a href="https://www.strava.com/activities/{{lastVisibleActivity.id}}"
           target="_blank">Most Recent</a>
      </span>
    </span>

    <span class="navbar-text"
          *ngIf="authenticating">
      Authenticating...
    </span>

    <span class="navbar-text"
          *ngIf="loading">
      Loading...
    </span>

    <span class="navbar-text small summary ml-auto"
          *ngIf="loaded">
      {{distanceToMiles(totalDistance) | number:'1.0-1'}} Miles<span class="text-warning"> | </span>
      {{secondsToHours(totalSeconds) | number:'1.0-1'}} Hours<span class="text-warning"> | </span>
      {{runCount}} Runs<span class="text-warning"></span><span class="text-warning"> | </span>
      {{rideCount}} Rides<span class="text-warning"></span>
    </span>

  </nav>

  <div class="d-flex justify-content-center mt-5"
       *ngIf="authenticating || loading">
    <div class="spinner-border text-warning"
         role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <div class="controls"
       *ngIf="loaded">

    <div class="d-flex pb-0 pt-0">
      <span class="ml-auto pb-0">

        <div class="switch map">
          <div class="onoffswitch">
            <input type="checkbox"
                   name="collapsemenu"
                   class="onoffswitch-checkbox"
                   id="mapCheck"
                   [(ngModel)]="showMap"
                   (ngModelChange)="showMapChanged()">
            <label class="onoffswitch-label"
                   for="mapCheck">
              <span class="onoffswitch-inner"></span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
        </div>

        <div class="switch overlay">
          <div class="onoffswitch">
            <input type="checkbox"
                   name="collapsemenu"
                   class="onoffswitch-checkbox"
                   id="singleCheck"
                   [(ngModel)]="overlay"
                   (ngModelChange)="filterChanged()">
            <label class="onoffswitch-label"
                   for="singleCheck">
              <span class="onoffswitch-inner"></span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
        </div>

        <div class="switch runs">
          <div class="onoffswitch">
            <input type="checkbox"
                   name="collapsemenu"
                   class="onoffswitch-checkbox"
                   id="runsCheck"
                   [(ngModel)]="showRuns"
                   (ngModelChange)="filterChanged()">
            <label class="onoffswitch-label"
                   for="runsCheck">
              <span class="onoffswitch-inner"></span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
        </div>

        <div class="switch rides">
          <div class="onoffswitch">
            <input type="checkbox"
                   name="collapsemenu"
                   class="onoffswitch-checkbox"
                   id="ridesCheck"
                   [(ngModel)]="showRides"
                   (ngModelChange)="filterChanged()">
            <label class="onoffswitch-label"
                   for="ridesCheck">
              <span class="onoffswitch-inner"></span>
              <span class="onoffswitch-switch"></span>
            </label>
          </div>
        </div>

      </span>

    </div>
    <div class="slider-container">
      <input type="range"
             min="1"
             [attr.max]="endRange"
             [(ngModel)]="rangePosition"
             (ngModelChange)="filterChanged()"
             class="slider"
             id="dateSlider">
    </div>
  </div>

  <div class="map-container"
       [ngClass]="{'hide-map' : !showMap}">
    <div class="map-frame">
      <div id="map"></div>
    </div>
  </div>
</div>
